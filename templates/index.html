<!DOCTYPE html>
<html>
<head>
  <title>Create Journal Paper</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    #video-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }
    h2 {
      text-align: center;
      margin-top: 10px;
      color: green;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      min-height: 100vh;
    }
    form {
      text-align: left;
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      font-weight: bold;
    }
    input[type="text"],
    input[type="number"],
    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
    }
    input[type="submit"] {
      background-color: #4CAF50;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    .drag-and-drop-container {
      border: 2px dashed #ccc;
      padding: 20px;
      text-align: center;
      cursor: pointer;
    }
    .drag-over {
      background-color: #f0f8ff; /* Light blue */
    }
    input[type="submit"]:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <video autoplay muted loop id="video-background">
    <source src="your-video.mp4" type="video/mp4">
  </video>
  <div class="container">
    <h2>Create Journal Paper</h2>
    <form action="/generate_paper" method="post" enctype="multipart/form-data">
    <label for="journal-type">Journal Type:</label>
      <select name="journal-type" id="journal-type" required>
        <option value="IJMAR-template">IJMAR-template</option>
        <option value="IJPPR-template">IJPPR-template</option>
        <option value="JCPR-template">JCPR-template</option>
        <option value="IJSRM-template">IJSRM-template</option>
        <!-- Add more options as needed -->
      </select>

      <input type="hidden" name="sectionIndex" id="sectionIndex" value="0">

      <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" name="title" id="title" required>
      </div>

      <div class="form-group">
        <label for="volume">Volume:</label>
        <input type="number"name ="volume" id="volume" required>
      </div>

      <div class="form-group">
        <label for="issuedate">Issue Date:</label>
        <input type="number" name="issuedate" id="issuedate" required>
      </div>

      <div class="form-group">
        <label for="month">Month_Year:</label>
        <input type="month" name="month" id="month" required style="width: 200px;">
      </div>
      <div class="form-group">
        <label for="page_no">PP:</label>
        <input type="value" name="page_no" id="page_no" min="1" max="100" step="1" required>
      </div>

      <div class="form-group">
        <label for="issndate">ISSN Date:</label>
        <input type="value" name="issndate" id="issndate" required>
      </div>

       <div class="form-group">
        <label for="doi">DOI:</label>
        <input type="date" name="doi" id="doi">
      </div>

      <div class="form-group">
        <label for="authors">Authors:</label>
        <input type="text" name="authors" id="authors" required>
      </div>

    <div class="form-group">
        <label for="address">Address:</label>
        <textarea name="address" id="address" required></textarea>
      </div>
      <div class="form-group">
        <label for="sub_date">Submission Date:</label>
        <input type="date" name="sub_date" id="sub_date" required>
      </div>

      <div class="form-group">
        <label for="rev_date">Revised Date:</label>
        <input type="date" name="rev_date" id="rev_date">
      </div>

      <div class="form-group">
        <label for="acc_date">Acceptance Date:</label>
        <input type="date" name="acc_date" id="acc_date" required>
      </div>
      <div class="form-group">
        <label for="abstract">Abstract:</label>
        <textarea name="abstract" rows="4" id="abstract" required></textarea>
      </div>
      <div class="form-group">
        <label for="keyword">Keywords:</label>
        <input type="text" name ="keyword" id="keyword" required>
      </div>


      <div class="form-group" id="section-container">
        <button type="button" id="add-section-button">Add Section</button>
      </div>
      <div id="sections">
        <!-- Section fields will be dynamically added here -->
      </div>
      <div class="form-group">
        <label for="reference">References:</label>
        <textarea name="reference" rows="4" id="reference" required></textarea>
      </div>
      <div class="form-group">
        <input type="submit" value="Generate Journal Paper">
      </div>
    </form>
  </div>
</body>


<script>
  document.addEventListener("DOMContentLoaded", function() {
    const addSectionButton = document.getElementById("add-section-button");
    const sectionsContainer = document.getElementById("sections");
    const imageUploadInput = document.getElementById("image-upload");

    let sectionIndex = 0;

    addSectionButton.addEventListener("click", function(e) {
      e.preventDefault();
      const sectionDiv = document.createElement("div");
      sectionDiv.className = "form-group";

      // Hidden input field to store fieldIndex
      const fieldIndexInput = document.createElement("input");
      fieldIndexInput.type = "hidden";
      fieldIndexInput.name = `field_index_${sectionIndex + 1}`;
      fieldIndexInput.value = 0; // Initial value for fieldIndex
      sectionDiv.appendChild(fieldIndexInput);

      // Hidden input field to store element types (table or input)
      const elementTypeInput = document.createElement("input");
      elementTypeInput.type = "hidden";
      elementTypeInput.name = `element_type_${sectionIndex + 1}`;
      elementTypeInput.value = "None"; // Initial value for element types
      sectionDiv.appendChild(elementTypeInput);

      const sectionTitleInput = document.createElement("input");
      sectionTitleInput.type = "text";
      sectionTitleInput.name = `section_title_${sectionIndex + 1}`;
      sectionTitleInput.id = `section_title_${sectionIndex + 1}`;
      sectionTitleInput.value = "";
      sectionTitleInput.placeholder = "Section Title";
      sectionTitleInput.required = true;
      sectionTitleInput.style.marginBottom = "10px";

      const sectionContentInput = document.createElement("textarea");
      sectionContentInput.name = `section_content_${sectionIndex + 1}`;
      sectionContentInput.id = `section_content_${sectionIndex + 1}`;
      sectionContentInput.value = "";
      sectionContentInput.placeholder = "Section Content";
      sectionContentInput.rows = 4;
      sectionContentInput.required = true;

      /*const sectionImageInput = document.createElement("input");
      sectionImageInput.type = "file";
      sectionImageInput.name = `section_image_${sectionIndex}_field_1`;
      sectionImageInput.id = `section_image_${sectionIndex}_field_1`;
      sectionImageInput.style.display = "none";
      sectionImageInput.accept = "image/*";*/

      //-----------------------Dyanmic Image Upload-----------------------
      const addImageBtn = document.createElement("button");
      addImageBtn.type = "button";
      addImageBtn.textContent = "Add Image";
      addImageBtn.addEventListener("click", function () {
          const currentFieldIndex = parseInt(fieldIndexInput.value, 10);

          // Create a container for the drag-and-drop area
          const dropContainer = document.createElement("div");
          dropContainer.className = "drag-and-drop-container";

          // Create the input element for file input
          const imageInput = document.createElement("input");
          imageInput.type = "file";
          const imageFieldName = `section_image_${sectionIndex}_${currentFieldIndex + 1}`;
          imageInput.name = imageFieldName;
          imageInput.id = `section_image_${sectionIndex}_${currentFieldIndex + 1}`;
          imageInput.accept = "image/*";
          imageInput.style.display = "none";

          // Create a label for the drag-and-drop area
          const dropLabel = document.createElement("label");
          dropLabel.textContent = "Drag & Drop or Click to Upload Image";
          dropLabel.htmlFor = imageInput.id;

          // Handle file selection through drag-and-drop and input click
          dropContainer.addEventListener("dragover", function (e) {
            e.preventDefault();
            dropContainer.classList.add("drag-over");
          });

          dropContainer.addEventListener("dragleave", function () {
            dropContainer.classList.remove("drag-over");
          });

          dropContainer.addEventListener("drop", function (e) {
            e.preventDefault();
            dropContainer.classList.remove("drag-over");

            const files = e.dataTransfer.files;
            handleFiles(files, dropLabel, imageInput);
          });

          imageInput.addEventListener("change", function (e) {
            const files = e.target.files;
            handleFiles(files, dropLabel, imageInput);
          });

          // Update fieldIndex value
          fieldIndexInput.value = currentFieldIndex + 1;

          // Update element type value
          const currentElementType = elementTypeInput.value;
          elementTypeInput.value = currentElementType + (currentElementType ? "," : "") + "image";

          // Append the elements to the container
          dropContainer.appendChild(dropLabel);
          dropContainer.appendChild(imageInput);
          sectionDiv.appendChild(dropContainer);

          // Append the image input to the form
          const form = document.querySelector('form');
          form.appendChild(imageInput);

          // Optionally, if you want to preview the image, you can do it here
          // For example, you can create an image element and append it to the form
          const imagePreview = document.createElement("img");
          imagePreview.src = URL.createObjectURL(imageInput.files[0]);
          imagePreview.style.maxWidth = "100%";
          form.appendChild(imagePreview);
        });

      //-----------------------Dyanmic Table Upload-----------------------
      const sectionTableButton = document.createElement("button");
      sectionTableButton.type = "button";
      sectionTableButton.textContent = "Add Table";
      sectionTableButton.addEventListener("click", function() {
        const currentFieldIndex = parseInt(fieldIndexInput.value, 10);
        const sectionTableTextarea = document.createElement("textarea");
        const tableFieldName = `section_table_${sectionIndex}_${currentFieldIndex + 1}`;
        sectionTableTextarea.name = tableFieldName;
        sectionTableTextarea.id = `section_table_${sectionIndex}_${currentFieldIndex + 1}`;
        sectionTableTextarea.value = "";
        sectionTableTextarea.placeholder = "Table Text";
        sectionTableTextarea.rows = 4;
        sectionTableTextarea.required = true;
        sectionTableTextarea.style.marginTop = "10px";

        // Update fieldIndex value
        fieldIndexInput.value = currentFieldIndex + 1;

        // Update element type value
        const currentElementType = elementTypeInput.value;
        elementTypeInput.value = currentElementType + (currentElementType ? "," : "") + "table";

        sectionDiv.appendChild(sectionTableTextarea);
      });

      // Hidden input field to store sectionIndex
      const sectionIndexInput = document.createElement("input");
      sectionIndexInput.type = "hidden";
      sectionIndexInput.name = `section_index_${sectionIndex}`;
      sectionIndexInput.value = sectionIndex;
      sectionDiv.appendChild(sectionIndexInput);

      sectionDiv.appendChild(sectionTitleInput);
      sectionDiv.appendChild(sectionContentInput);
      sectionDiv.appendChild(sectionTableButton);
      sectionDiv.appendChild(addImageBtn);

      sectionsContainer.appendChild(sectionDiv);

      sectionIndex++;
      document.getElementById("sectionIndex").value = sectionIndex;
    });
  });
  // Function to handle files and update the drop label
  function handleFiles(files, dropLabel, imageInput) {
  if (files.length > 0) {
    const fileName = files[0].name;
    // Display the file name in the drag-and-drop area
    dropLabel.textContent = `Image: ${fileName}`;

    // If you need to preview the image, you can do it here
    // For example, you can create a preview image and append it to the dropContainer
  }
}
</script>
</html>
